<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pymatgen.entries.tests.test_compatibility &#8212; pymatgen 4.6.0 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/proBlue.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '4.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="top" title="pymatgen 4.6.0 documentation" href="../../../../index.html" />
    <link rel="up" title="Module code" href="../../../index.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33990148-1']);
  _gaq.push(['_trackPageview']);
</script>

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">pymatgen 4.6.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for pymatgen.entries.tests.test_compatibility</h1><div class="highlight"><pre>
<span></span><span class="c1"># coding: utf-8</span>
<span class="c1"># Copyright (c) Pymatgen Development Team.</span>
<span class="c1"># Distributed under the terms of the MIT License.</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span><span class="p">,</span> <span class="n">unicode_literals</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Mar 19, 2012</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Shyue Ping Ong, Stephen Dacek&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;Copyright 2012, The Materials Project&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
<span class="n">__maintainer__</span> <span class="o">=</span> <span class="s2">&quot;Shyue Ping Ong&quot;</span>
<span class="n">__email__</span> <span class="o">=</span> <span class="s2">&quot;shyuep@gmail.com&quot;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s2">&quot;Mar 19, 2012&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">unittest2</span> <span class="k">as</span> <span class="nn">unittest</span>

<span class="kn">from</span> <span class="nn">pymatgen.entries.compatibility</span> <span class="k">import</span> <span class="n">MaterialsProjectCompatibility</span><span class="p">,</span> \
    <span class="n">MITCompatibility</span><span class="p">,</span> <span class="n">AqueousCorrection</span><span class="p">,</span> <span class="n">MITAqueousCompatibility</span><span class="p">,</span> <span class="n">MaterialsProjectAqueousCompatibility</span>
<span class="kn">from</span> <span class="nn">pymatgen.entries.computed_entries</span> <span class="k">import</span> <span class="n">ComputedEntry</span><span class="p">,</span> \
    <span class="n">ComputedStructureEntry</span>
<span class="kn">from</span> <span class="nn">pymatgen</span> <span class="k">import</span> <span class="n">Composition</span><span class="p">,</span> <span class="n">Lattice</span><span class="p">,</span> <span class="n">Structure</span><span class="p">,</span> <span class="n">Element</span>


<div class="viewcode-block" id="MaterialsProjectCompatibilityTest"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MaterialsProjectCompatibilityTest">[docs]</a><span class="k">class</span> <span class="nc">MaterialsProjectCompatibilityTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="MaterialsProjectCompatibilityTest.setUp"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MaterialsProjectCompatibilityTest.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry1</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">5.3</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entry_sulfide</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;FeS&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE S 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entry2</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe3O4&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">5.3</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry3</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;FeO&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">4.3</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">compat</span> <span class="o">=</span> <span class="n">MaterialsProjectCompatibility</span><span class="p">(</span><span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ggacompat</span> <span class="o">=</span> <span class="n">MaterialsProjectCompatibility</span><span class="p">(</span><span class="s2">&quot;GGA&quot;</span><span class="p">,</span> <span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="MaterialsProjectCompatibilityTest.test_process_entry"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MaterialsProjectCompatibilityTest.test_process_entry">[docs]</a>    <span class="k">def</span> <span class="nf">test_process_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#Correct parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ggacompat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry1</span><span class="p">))</span>

        <span class="c1">#Correct parameters</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;hubbards&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ggacompat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>

        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">5.3</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span></div>

<div class="viewcode-block" id="MaterialsProjectCompatibilityTest.test_correction_values"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MaterialsProjectCompatibilityTest.test_correction_values">[docs]</a>    <span class="k">def</span> <span class="nf">test_correction_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#test_corrections</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry1</span><span class="p">)</span><span class="o">.</span><span class="n">correction</span><span class="p">,</span>
                               <span class="o">-</span> <span class="mf">2.733</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mf">0.70229</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span>

        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;FeF3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">5.3</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE F 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;180141c33d032bfbfff30b3bea9d23dd&#39;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>

        <span class="c1">#Check actual correction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span><span class="o">.</span><span class="n">correction</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.733</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entry_sulfide</span><span class="p">)</span><span class="o">.</span><span class="n">correction</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.66346</span><span class="p">)</span></div>

<div class="viewcode-block" id="MaterialsProjectCompatibilityTest.test_U_values"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MaterialsProjectCompatibilityTest.test_U_values">[docs]</a>    <span class="k">def</span> <span class="nf">test_U_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#Wrong U value</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">5.2</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>

        <span class="c1">#GGA run of U</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>

        <span class="c1">#GGA+U run of non-U</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Al2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Al&#39;</span><span class="p">:</span> <span class="mf">5.3</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE Al 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;805c888bbd2793e462311f6a20d873d9&#39;</span><span class="p">},</span>
                                           <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>

        <span class="c1">#Materials project should not have a U for sulfides</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;FeS2&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">5.3</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                           <span class="p">{</span><span class="s2">&quot;titel&quot;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE S 08Apr2002&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s2">&quot;f7f8e4a74a6cbb8d63e41f4373b54df2&quot;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span></div>

<div class="viewcode-block" id="MaterialsProjectCompatibilityTest.test_wrong_psp"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MaterialsProjectCompatibilityTest.test_wrong_psp">[docs]</a>    <span class="k">def</span> <span class="nf">test_wrong_psp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#Wrong psp</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">5.3</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;9530da8244e4dac17580869b4adab115&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span></div>

<div class="viewcode-block" id="MaterialsProjectCompatibilityTest.test_element_processing"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MaterialsProjectCompatibilityTest.test_element_processing">[docs]</a>    <span class="k">def</span> <span class="nf">test_element_processing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;O&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{},</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}],</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">})</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
<span class="c1">#        self.assertEqual(entry.entry_id, -8)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ggacompat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span>
                               <span class="o">-</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="MaterialsProjectCompatibilityTest.test_get_explanation_dict"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MaterialsProjectCompatibilityTest.test_get_explanation_dict">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_explanation_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">compat</span> <span class="o">=</span> <span class="n">MaterialsProjectCompatibility</span><span class="p">(</span><span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">5.3</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s2">&quot;7a25bc5b9a5393f46600a4939d357982&quot;</span><span class="p">}]})</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">get_explanation_dict</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;MPRelaxSet Potcar Correction&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;corrections&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span>
            <span class="s2">&quot;name&quot;</span><span class="p">])</span></div>

<div class="viewcode-block" id="MaterialsProjectCompatibilityTest.test_get_corrections_dict"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MaterialsProjectCompatibilityTest.test_get_corrections_dict">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_corrections_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">compat</span> <span class="o">=</span> <span class="n">MaterialsProjectCompatibility</span><span class="p">(</span><span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ggacompat</span> <span class="o">=</span> <span class="n">MaterialsProjectCompatibility</span><span class="p">(</span><span class="s2">&quot;GGA&quot;</span><span class="p">,</span> <span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1">#Correct parameters</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">5.3</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                           <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s2">&quot;7a25bc5b9a5393f46600a4939d357982&quot;</span><span class="p">}]})</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">get_corrections_dict</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;MP Anion Correction&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mf">2.10687</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;MP Advanced Correction&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mf">5.466</span><span class="p">)</span>

        <span class="n">entry</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;is_hubbard&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">del</span> <span class="n">entry</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;hubbards&quot;</span><span class="p">]</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">ggacompat</span><span class="o">.</span><span class="n">get_corrections_dict</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="s2">&quot;MP Advanced Correction&quot;</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span></div>

<div class="viewcode-block" id="MaterialsProjectCompatibilityTest.test_process_entries"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MaterialsProjectCompatibilityTest.test_process_entries">[docs]</a>    <span class="k">def</span> <span class="nf">test_process_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entries</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">entry1</span><span class="p">,</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">entry2</span><span class="p">,</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">entry3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MITCompatibilityTest"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest">[docs]</a><span class="k">class</span> <span class="nc">MITCompatibilityTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="MITCompatibilityTest.setUp"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compat</span> <span class="o">=</span> <span class="n">MITCompatibility</span><span class="p">(</span><span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ggacompat</span> <span class="o">=</span> <span class="n">MITCompatibility</span><span class="p">(</span><span class="s2">&quot;GGA&quot;</span><span class="p">,</span> <span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_O</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;9530da8244e4dac17580869b4adab115&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entry_F</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;FeF3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;9530da8244e4dac17580869b4adab115&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE F 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;180141c33d032bfbfff30b3bea9d23dd&#39;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_S</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;FeS2&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">1.9</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe 06Sep2000&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;9530da8244e4dac17580869b4adab115&#39;</span><span class="p">},</span>
                                           <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE S 08Apr2002&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;d368db6899d8839859bbee4811a42a88&#39;</span><span class="p">}]})</span></div>

<div class="viewcode-block" id="MITCompatibilityTest.test_process_entry"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.test_process_entry">[docs]</a>    <span class="k">def</span> <span class="nf">test_process_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#Correct parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_O</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_F</span><span class="p">))</span></div>

<div class="viewcode-block" id="MITCompatibilityTest.test_correction_value"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.test_correction_value">[docs]</a>    <span class="k">def</span> <span class="nf">test_correction_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#Check actual correction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_O</span><span class="p">)</span><span class="o">.</span><span class="n">correction</span><span class="p">,</span>
                               <span class="o">-</span> <span class="mf">1.723</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span><span class="mf">0.66975</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_F</span><span class="p">)</span><span class="o">.</span><span class="n">correction</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.723</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_S</span><span class="p">)</span><span class="o">.</span><span class="n">correction</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.113</span><span class="p">)</span></div>

<div class="viewcode-block" id="MITCompatibilityTest.test_U_value"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.test_U_value">[docs]</a>    <span class="k">def</span> <span class="nf">test_U_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># MIT should have a U value for Fe containing sulfides</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_S</span><span class="p">))</span>

        <span class="c1"># MIT should not have a U value for Ni containing sulfides</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;NiS2&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Ni&#39;</span><span class="p">:</span> <span class="mf">1.9</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Ni 06Sep2000&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;653f5772e68b2c7fd87ffd1086c0d710&#39;</span><span class="p">},</span>
                                           <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE S 08Apr2002&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;d368db6899d8839859bbee4811a42a88&#39;</span><span class="p">}]})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>

        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;NiS2&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Ni 06Sep2000&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;653f5772e68b2c7fd87ffd1086c0d710&#39;</span><span class="p">},</span>
                                           <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE S 08Apr2002&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;d368db6899d8839859bbee4811a42a88&#39;</span><span class="p">}]})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ggacompat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span></div>

<div class="viewcode-block" id="MITCompatibilityTest.test_wrong_U_value"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.test_wrong_U_value">[docs]</a>    <span class="k">def</span> <span class="nf">test_wrong_U_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#Wrong U value</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">5.2</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;9530da8244e4dac17580869b4adab115&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>

        <span class="c1">#GGA run</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;9530da8244e4dac17580869b4adab115&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ggacompat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span></div>

<div class="viewcode-block" id="MITCompatibilityTest.test_wrong_psp"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.test_wrong_psp">[docs]</a>    <span class="k">def</span> <span class="nf">test_wrong_psp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#Wrong psp</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span></div>

<div class="viewcode-block" id="MITCompatibilityTest.test_element_processing"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.test_element_processing">[docs]</a>    <span class="k">def</span> <span class="nf">test_element_processing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#Testing processing of elements.</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;O&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{},</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}],</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">})</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="MITCompatibilityTest.test_same_potcar_symbol"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.test_same_potcar_symbol">[docs]</a>    <span class="k">def</span> <span class="nf">test_same_potcar_symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Same symbol different hash thus a different potcar</span>
        <span class="c1">#Correct Hash Correct Symbol</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;9530da8244e4dac17580869b4adab115&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>
        <span class="c1">#Incorrect Hash Correct Symbol</span>
        <span class="n">entry2</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Fe 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;DifferentHash&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="n">compat</span> <span class="o">=</span> <span class="n">MITCompatibility</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entries</span><span class="p">([</span><span class="n">entry</span><span class="p">,</span> <span class="n">entry2</span><span class="p">])),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entries</span><span class="p">([</span><span class="n">entry</span><span class="p">,</span> <span class="n">entry2</span><span class="p">])),</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="MITCompatibilityTest.test_revert_to_symbols"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.test_revert_to_symbols">[docs]</a>    <span class="k">def</span> <span class="nf">test_revert_to_symbols</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#Test that you can revert to potcar_symbols if potcar_spec is not present</span>
        <span class="n">compat</span> <span class="o">=</span> <span class="n">MITCompatibility</span><span class="p">()</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_symbols&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;PAW_PBE Fe 06Sep2000&#39;</span><span class="p">,</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">]})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
        <span class="c1">#raise if check_potcar_hash is set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span></div>

<div class="viewcode-block" id="MITCompatibilityTest.test_potcar_doenst_match_structure"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.test_potcar_doenst_match_structure">[docs]</a>    <span class="k">def</span> <span class="nf">test_potcar_doenst_match_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">compat</span> <span class="o">=</span> <span class="n">MITCompatibility</span><span class="p">()</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Li2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_symbols&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;PAW_PBE Fe_pv 06Sep2000&#39;</span><span class="p">,</span>
                                           <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">]})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span></div>

<div class="viewcode-block" id="MITCompatibilityTest.test_potcar_spec_is_none"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.test_potcar_spec_is_none">[docs]</a>    <span class="k">def</span> <span class="nf">test_potcar_spec_is_none</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">compat</span> <span class="o">=</span> <span class="n">MITCompatibility</span><span class="p">(</span><span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Li2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span></div>


<div class="viewcode-block" id="MITCompatibilityTest.test_get_explanation_dict"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.MITCompatibilityTest.test_get_explanation_dict">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_explanation_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">compat</span> <span class="o">=</span> <span class="n">MITCompatibility</span><span class="p">(</span><span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span>
            <span class="s1">&#39;Fe2O3&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Fe&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA+U&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE Fe 06Sep2000&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;994537de5c4122b7f1b77fb604476db4&#39;</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s2">&quot;7a25bc5b9a5393f46600a4939d357982&quot;</span><span class="p">}]})</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">get_explanation_dict</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;MITRelaxSet Potcar Correction&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;corrections&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span>
            <span class="s2">&quot;name&quot;</span><span class="p">])</span></div></div>
        

<div class="viewcode-block" id="OxideTypeCorrectionTest"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionTest">[docs]</a><span class="k">class</span> <span class="nc">OxideTypeCorrectionTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="OxideTypeCorrectionTest.setUp"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionTest.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compat</span> <span class="o">=</span> <span class="n">MITCompatibility</span><span class="p">(</span><span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="OxideTypeCorrectionTest.test_no_struct_compat"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionTest.test_no_struct_compat">[docs]</a>    <span class="k">def</span> <span class="nf">test_no_struct_compat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lio2_entry_nostruct</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span><span class="n">Composition</span><span class="p">(</span><span class="s2">&quot;Li2O4&quot;</span><span class="p">),</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
                                            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;oxide_type&quot;</span><span class="p">:</span> <span class="s2">&quot;superoxide&quot;</span><span class="p">},</span>
                                            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                          <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                          <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Li 17Jan2003&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;65e83282d1707ec078c1012afbd05be8&#39;</span><span class="p">},</span>
                                                          <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="n">lio2_entry_corrected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">lio2_entry_nostruct</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">lio2_entry_corrected</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span> <span class="o">-</span> <span class="mf">0.13893</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span></div>

<div class="viewcode-block" id="OxideTypeCorrectionTest.test_process_entry_superoxide"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionTest.test_process_entry_superoxide">[docs]</a>    <span class="k">def</span> <span class="nf">test_process_entry_superoxide</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">el_li</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Li&quot;</span><span class="p">)</span>
        <span class="n">el_o</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
        <span class="n">latt</span> <span class="o">=</span> <span class="n">Lattice</span><span class="p">([[</span><span class="mf">3.985034</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">4.881506</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.959824</span><span class="p">]])</span>
        <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">el_li</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">]</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.500000</span><span class="p">])</span>
        <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
        <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mf">0.632568</span><span class="p">,</span> <span class="mf">0.085090</span><span class="p">,</span> <span class="mf">0.500000</span><span class="p">])</span>
        <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mf">0.367432</span><span class="p">,</span> <span class="mf">0.914910</span><span class="p">,</span> <span class="mf">0.500000</span><span class="p">])</span>
        <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mf">0.132568</span><span class="p">,</span> <span class="mf">0.414910</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">])</span>
        <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mf">0.867432</span><span class="p">,</span> <span class="mf">0.585090</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">])</span>
        <span class="n">struct</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span><span class="n">latt</span><span class="p">,</span> <span class="n">elts</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="n">lio2_entry</span> <span class="o">=</span> <span class="n">ComputedStructureEntry</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
                                            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                          <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                          <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Li 17Jan2003&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;65e83282d1707ec078c1012afbd05be8&#39;</span><span class="p">},</span>
                                                          <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="n">lio2_entry_corrected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">lio2_entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">lio2_entry_corrected</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span> <span class="o">-</span><span class="mf">0.13893</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span></div>

<div class="viewcode-block" id="OxideTypeCorrectionTest.test_process_entry_peroxide"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionTest.test_process_entry_peroxide">[docs]</a>    <span class="k">def</span> <span class="nf">test_process_entry_peroxide</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">latt</span> <span class="o">=</span> <span class="n">Lattice</span><span class="o">.</span><span class="n">from_parameters</span><span class="p">(</span><span class="mf">3.159597</span><span class="p">,</span> <span class="mf">3.159572</span><span class="p">,</span> <span class="mf">7.685205</span><span class="p">,</span> <span class="mf">89.999884</span><span class="p">,</span> <span class="mf">89.999674</span><span class="p">,</span> <span class="mf">60.000510</span><span class="p">)</span>
        <span class="n">el_li</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Li&quot;</span><span class="p">)</span>
        <span class="n">el_o</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
        <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">el_li</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">]</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.666656</span><span class="p">,</span> <span class="mf">0.666705</span><span class="p">,</span> <span class="mf">0.750001</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.333342</span><span class="p">,</span> <span class="mf">0.333378</span><span class="p">,</span> <span class="mf">0.250001</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.000001</span><span class="p">,</span> <span class="mf">0.000041</span><span class="p">,</span> <span class="mf">0.500001</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.000001</span><span class="p">,</span> <span class="mf">0.000021</span><span class="p">,</span> <span class="mf">0.000001</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.333347</span><span class="p">,</span> <span class="mf">0.333332</span><span class="p">,</span> <span class="mf">0.649191</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.333322</span><span class="p">,</span> <span class="mf">0.333353</span><span class="p">,</span> <span class="mf">0.850803</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.666666</span><span class="p">,</span> <span class="mf">0.666686</span><span class="p">,</span> <span class="mf">0.350813</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.666665</span><span class="p">,</span> <span class="mf">0.666684</span><span class="p">,</span> <span class="mf">0.149189</span><span class="p">]]</span>
        <span class="n">struct</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span><span class="n">latt</span><span class="p">,</span> <span class="n">elts</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="n">li2o2_entry</span> <span class="o">=</span> <span class="n">ComputedStructureEntry</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
                                            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                          <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                          <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Li 17Jan2003&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;65e83282d1707ec078c1012afbd05be8&#39;</span><span class="p">},</span>
                                                          <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="n">li2o2_entry_corrected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">li2o2_entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">li2o2_entry_corrected</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span> <span class="o">-</span> <span class="mf">0.44317</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span></div>

<div class="viewcode-block" id="OxideTypeCorrectionTest.test_process_entry_ozonide"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionTest.test_process_entry_ozonide">[docs]</a>    <span class="k">def</span> <span class="nf">test_process_entry_ozonide</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">el_li</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Li&quot;</span><span class="p">)</span>
        <span class="n">el_o</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
        <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">el_li</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">]</span>
        <span class="n">latt</span> <span class="o">=</span> <span class="n">Lattice</span><span class="o">.</span><span class="n">from_parameters</span><span class="p">(</span><span class="mf">3.999911</span><span class="p">,</span> <span class="mf">3.999911</span><span class="p">,</span> <span class="mf">3.999911</span><span class="p">,</span>
                                       <span class="mf">133.847504</span><span class="p">,</span> <span class="mf">102.228244</span><span class="p">,</span> <span class="mf">95.477342</span><span class="p">)</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.513004</span><span class="p">,</span> <span class="mf">0.513004</span><span class="p">,</span> <span class="mf">1.000000</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.017616</span><span class="p">,</span> <span class="mf">0.017616</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.649993</span><span class="p">,</span> <span class="mf">0.874790</span><span class="p">,</span> <span class="mf">0.775203</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.099587</span><span class="p">,</span> <span class="mf">0.874790</span><span class="p">,</span> <span class="mf">0.224797</span><span class="p">]]</span>
        <span class="n">struct</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span><span class="n">latt</span><span class="p">,</span> <span class="n">elts</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="n">lio3_entry</span> <span class="o">=</span> <span class="n">ComputedStructureEntry</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
                                            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                          <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                          <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Li 17Jan2003&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;65e83282d1707ec078c1012afbd05be8&#39;</span><span class="p">},</span>
                                                          <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="n">lio3_entry_corrected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">lio3_entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">lio3_entry_corrected</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="OxideTypeCorrectionTest.test_process_entry_oxide"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionTest.test_process_entry_oxide">[docs]</a>    <span class="k">def</span> <span class="nf">test_process_entry_oxide</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">el_li</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Li&quot;</span><span class="p">)</span>
        <span class="n">el_o</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
        <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">el_li</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_o</span><span class="p">]</span>
        <span class="n">latt</span> <span class="o">=</span> <span class="n">Lattice</span><span class="o">.</span><span class="n">from_parameters</span><span class="p">(</span><span class="mf">3.278</span><span class="p">,</span> <span class="mf">3.278</span><span class="p">,</span> <span class="mf">3.278</span><span class="p">,</span>
                                       <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]</span>
        <span class="n">struct</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span><span class="n">latt</span><span class="p">,</span> <span class="n">elts</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="n">li2o_entry</span> <span class="o">=</span> <span class="n">ComputedStructureEntry</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
                                            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                          <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                          <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Li 17Jan2003&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;65e83282d1707ec078c1012afbd05be8&#39;</span><span class="p">},</span>
                                                          <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="n">li2o_entry_corrected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">li2o_entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">li2o_entry_corrected</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span> <span class="o">-</span><span class="mf">0.66975</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="OxideTypeCorrectionNoPeroxideCorrTest"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionNoPeroxideCorrTest">[docs]</a><span class="k">class</span> <span class="nc">OxideTypeCorrectionNoPeroxideCorrTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="OxideTypeCorrectionNoPeroxideCorrTest.setUp"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionNoPeroxideCorrTest.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compat</span> <span class="o">=</span> <span class="n">MITCompatibility</span><span class="p">(</span><span class="n">correct_peroxide</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="OxideTypeCorrectionNoPeroxideCorrTest.test_oxide_energy_corr"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionNoPeroxideCorrTest.test_oxide_energy_corr">[docs]</a>    <span class="k">def</span> <span class="nf">test_oxide_energy_corr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">el_li</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Li&quot;</span><span class="p">)</span>
        <span class="n">el_o</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
        <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">el_li</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_o</span><span class="p">]</span>
        <span class="n">latt</span> <span class="o">=</span> <span class="n">Lattice</span><span class="o">.</span><span class="n">from_parameters</span><span class="p">(</span><span class="mf">3.278</span><span class="p">,</span> <span class="mf">3.278</span><span class="p">,</span> <span class="mf">3.278</span><span class="p">,</span>
                                       <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]</span>
        <span class="n">struct</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span><span class="n">latt</span><span class="p">,</span> <span class="n">elts</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="n">li2o_entry</span> <span class="o">=</span> <span class="n">ComputedStructureEntry</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
                                            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                          <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                          <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Li 17Jan2003&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;65e83282d1707ec078c1012afbd05be8&#39;</span><span class="p">},</span>
                                                          <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="n">li2o_entry_corrected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">li2o_entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">li2o_entry_corrected</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span> <span class="o">-</span><span class="mf">0.66975</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span></div>

<div class="viewcode-block" id="OxideTypeCorrectionNoPeroxideCorrTest.test_peroxide_energy_corr"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionNoPeroxideCorrTest.test_peroxide_energy_corr">[docs]</a>    <span class="k">def</span> <span class="nf">test_peroxide_energy_corr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">latt</span> <span class="o">=</span> <span class="n">Lattice</span><span class="o">.</span><span class="n">from_parameters</span><span class="p">(</span><span class="mf">3.159597</span><span class="p">,</span> <span class="mf">3.159572</span><span class="p">,</span> <span class="mf">7.685205</span><span class="p">,</span> <span class="mf">89.999884</span><span class="p">,</span> <span class="mf">89.999674</span><span class="p">,</span> <span class="mf">60.000510</span><span class="p">)</span>
        <span class="n">el_li</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Li&quot;</span><span class="p">)</span>
        <span class="n">el_o</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
        <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">el_li</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">]</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.666656</span><span class="p">,</span> <span class="mf">0.666705</span><span class="p">,</span> <span class="mf">0.750001</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.333342</span><span class="p">,</span> <span class="mf">0.333378</span><span class="p">,</span> <span class="mf">0.250001</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.000001</span><span class="p">,</span> <span class="mf">0.000041</span><span class="p">,</span> <span class="mf">0.500001</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.000001</span><span class="p">,</span> <span class="mf">0.000021</span><span class="p">,</span> <span class="mf">0.000001</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.333347</span><span class="p">,</span> <span class="mf">0.333332</span><span class="p">,</span> <span class="mf">0.649191</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.333322</span><span class="p">,</span> <span class="mf">0.333353</span><span class="p">,</span> <span class="mf">0.850803</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.666666</span><span class="p">,</span> <span class="mf">0.666686</span><span class="p">,</span> <span class="mf">0.350813</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.666665</span><span class="p">,</span> <span class="mf">0.666684</span><span class="p">,</span> <span class="mf">0.149189</span><span class="p">]]</span>
        <span class="n">struct</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span><span class="n">latt</span><span class="p">,</span> <span class="n">elts</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="n">li2o2_entry</span> <span class="o">=</span> <span class="n">ComputedStructureEntry</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
                                            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                          <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                          <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Li 17Jan2003&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;65e83282d1707ec078c1012afbd05be8&#39;</span><span class="p">},</span>
                                                          <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="n">li2o2_entry_corrected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">li2o2_entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">AssertionError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">,</span>
                           <span class="o">*</span><span class="p">(</span><span class="n">li2o2_entry_corrected</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span> <span class="o">-</span> <span class="mf">0.44317</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">li2o2_entry_corrected</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span> <span class="o">-</span> <span class="mf">0.66975</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span></div>

<div class="viewcode-block" id="OxideTypeCorrectionNoPeroxideCorrTest.test_ozonide"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.OxideTypeCorrectionNoPeroxideCorrTest.test_ozonide">[docs]</a>    <span class="k">def</span> <span class="nf">test_ozonide</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">el_li</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Li&quot;</span><span class="p">)</span>
        <span class="n">el_o</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
        <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">el_li</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">]</span>
        <span class="n">latt</span> <span class="o">=</span> <span class="n">Lattice</span><span class="o">.</span><span class="n">from_parameters</span><span class="p">(</span><span class="mf">3.999911</span><span class="p">,</span> <span class="mf">3.999911</span><span class="p">,</span> <span class="mf">3.999911</span><span class="p">,</span>
                                       <span class="mf">133.847504</span><span class="p">,</span> <span class="mf">102.228244</span><span class="p">,</span> <span class="mf">95.477342</span><span class="p">)</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.513004</span><span class="p">,</span> <span class="mf">0.513004</span><span class="p">,</span> <span class="mf">1.000000</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.017616</span><span class="p">,</span> <span class="mf">0.017616</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.649993</span><span class="p">,</span> <span class="mf">0.874790</span><span class="p">,</span> <span class="mf">0.775203</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.099587</span><span class="p">,</span> <span class="mf">0.874790</span><span class="p">,</span> <span class="mf">0.224797</span><span class="p">]]</span>
        <span class="n">struct</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span><span class="n">latt</span><span class="p">,</span> <span class="n">elts</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="n">lio3_entry</span> <span class="o">=</span> <span class="n">ComputedStructureEntry</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
                                            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                          <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                          <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Li 17Jan2003&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;65e83282d1707ec078c1012afbd05be8&#39;</span><span class="p">},</span>
                                                          <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">}]})</span>

        <span class="n">lio3_entry_corrected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">lio3_entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">lio3_entry_corrected</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span> <span class="o">-</span> <span class="mi">3</span> <span class="o">*</span> <span class="mf">0.66975</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="AqueousCorrectionTest"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.AqueousCorrectionTest">[docs]</a><span class="k">class</span> <span class="nc">AqueousCorrectionTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="AqueousCorrectionTest.setUp"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.AqueousCorrectionTest.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">module_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
        <span class="n">fp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">module_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">pardir</span><span class="p">,</span> <span class="s2">&quot;MITCompatibility.yaml&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">corr</span> <span class="o">=</span> <span class="n">AqueousCorrection</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span></div>

<div class="viewcode-block" id="AqueousCorrectionTest.test_compound_energy"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.AqueousCorrectionTest.test_compound_energy">[docs]</a>    <span class="k">def</span> <span class="nf">test_compound_energy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">O2_entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">corr</span><span class="o">.</span><span class="n">correct_entry</span><span class="p">(</span><span class="n">ComputedEntry</span><span class="p">(</span><span class="n">Composition</span><span class="p">(</span><span class="s2">&quot;O2&quot;</span><span class="p">),</span>
                                                          <span class="o">-</span><span class="mf">4.9355</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
        <span class="n">H2_entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">corr</span><span class="o">.</span><span class="n">correct_entry</span><span class="p">(</span><span class="n">ComputedEntry</span><span class="p">(</span><span class="n">Composition</span><span class="p">(</span><span class="s2">&quot;H2&quot;</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
        <span class="n">H2O_entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">corr</span><span class="o">.</span><span class="n">correct_entry</span><span class="p">(</span><span class="n">ComputedEntry</span><span class="p">(</span><span class="n">Composition</span><span class="p">(</span><span class="s2">&quot;H2O&quot;</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
        <span class="n">H2O_formation_energy</span> <span class="o">=</span> <span class="n">H2O_entry</span><span class="o">.</span><span class="n">energy</span> <span class="o">-</span> <span class="p">(</span><span class="n">H2_entry</span><span class="o">.</span><span class="n">energy</span> <span class="o">+</span>
                                                    <span class="n">O2_entry</span><span class="o">.</span><span class="n">energy</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">H2O_formation_energy</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.46</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span><span class="n">Composition</span><span class="p">(</span><span class="s2">&quot;H2O&quot;</span><span class="p">),</span> <span class="o">-</span><span class="mi">16</span><span class="p">)</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">corr</span><span class="o">.</span><span class="n">correct_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mf">14.916</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span><span class="n">Composition</span><span class="p">(</span><span class="s2">&quot;H2O&quot;</span><span class="p">),</span> <span class="o">-</span><span class="mi">24</span><span class="p">)</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">corr</span><span class="o">.</span><span class="n">correct_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mf">14.916</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

        <span class="n">entry</span> <span class="o">=</span> <span class="n">ComputedEntry</span><span class="p">(</span><span class="n">Composition</span><span class="p">(</span><span class="s2">&quot;Cl&quot;</span><span class="p">),</span> <span class="o">-</span><span class="mi">24</span><span class="p">)</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">corr</span><span class="o">.</span><span class="n">correct_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="o">-</span><span class="mf">24.344373</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestMITAqueousCompatibility"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.TestMITAqueousCompatibility">[docs]</a><span class="k">class</span> <span class="nc">TestMITAqueousCompatibility</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="TestMITAqueousCompatibility.setUp"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.TestMITAqueousCompatibility.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compat</span> <span class="o">=</span> <span class="n">MITCompatibility</span><span class="p">(</span><span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aqcompat</span> <span class="o">=</span> <span class="n">MITAqueousCompatibility</span><span class="p">(</span><span class="n">check_potcar_hash</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">module_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
        <span class="n">fp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">module_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">pardir</span><span class="p">,</span> <span class="s2">&quot;MITCompatibility.yaml&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aqcorr</span> <span class="o">=</span>  <span class="n">AqueousCorrection</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestMITAqueousCompatibility.test_aqueous_compat"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.TestMITAqueousCompatibility.test_aqueous_compat">[docs]</a>    <span class="k">def</span> <span class="nf">test_aqueous_compat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">el_li</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Li&quot;</span><span class="p">)</span>
        <span class="n">el_o</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
        <span class="n">el_h</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;H&quot;</span><span class="p">)</span>
        <span class="n">latt</span> <span class="o">=</span> <span class="n">Lattice</span><span class="o">.</span><span class="n">from_parameters</span><span class="p">(</span><span class="mf">3.565276</span><span class="p">,</span> <span class="mf">3.565276</span><span class="p">,</span> <span class="mf">4.384277</span><span class="p">,</span> <span class="mf">90.000000</span><span class="p">,</span> <span class="mf">90.000000</span><span class="p">,</span> <span class="mf">90.000000</span><span class="p">)</span>
        <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">el_h</span><span class="p">,</span> <span class="n">el_h</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">]</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.413969</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.586031</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.192672</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.807328</span><span class="p">]]</span>
        <span class="n">struct</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span><span class="n">latt</span><span class="p">,</span> <span class="n">elts</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="n">lioh_entry</span> <span class="o">=</span> <span class="n">ComputedStructureEntry</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
                                            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                          <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                          <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;potcar_spec&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span><span class="s1">&#39;PAW_PBE Li 17Jan2003&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;65e83282d1707ec078c1012afbd05be8&#39;</span><span class="p">},</span>
                                                          <span class="p">{</span><span class="s1">&#39;titel&#39;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s1">&#39;7a25bc5b9a5393f46600a4939d357982&#39;</span><span class="p">},</span>
                                                          <span class="p">{</span><span class="s2">&quot;titel&quot;</span><span class="p">:</span> <span class="s1">&#39;PAW_PBE H 15Jun2001&#39;</span><span class="p">,</span>
                                                           <span class="s1">&#39;hash&#39;</span><span class="p">:</span> <span class="s2">&quot;bb43c666e3d36577264afe07669e9582&quot;</span><span class="p">}]})</span>
        <span class="n">lioh_entry_compat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">lioh_entry</span><span class="p">)</span>
        <span class="n">lioh_entry_compat_aqcorr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqcorr</span><span class="o">.</span><span class="n">correct_entry</span><span class="p">(</span><span class="n">lioh_entry_compat</span><span class="p">)</span>
        <span class="n">lioh_entry_aqcompat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aqcompat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">lioh_entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">lioh_entry_compat_aqcorr</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="n">lioh_entry_aqcompat</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestMITAqueousCompatibility.test_potcar_doenst_match_structure"><a class="viewcode-back" href="../../../../pymatgen.entries.tests.test_compatibility.html#pymatgen.entries.tests.test_compatibility.TestMITAqueousCompatibility.test_potcar_doenst_match_structure">[docs]</a>    <span class="k">def</span> <span class="nf">test_potcar_doenst_match_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">compat</span> <span class="o">=</span> <span class="n">MITCompatibility</span><span class="p">()</span>
        <span class="n">el_li</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Li&quot;</span><span class="p">)</span>
        <span class="n">el_o</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
        <span class="n">el_h</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s2">&quot;H&quot;</span><span class="p">)</span>
        <span class="n">latt</span> <span class="o">=</span> <span class="n">Lattice</span><span class="o">.</span><span class="n">from_parameters</span><span class="p">(</span><span class="mf">3.565276</span><span class="p">,</span> <span class="mf">3.565276</span><span class="p">,</span> <span class="mf">4.384277</span><span class="p">,</span> <span class="mf">90.000000</span><span class="p">,</span> <span class="mf">90.000000</span><span class="p">,</span> <span class="mf">90.000000</span><span class="p">)</span>
        <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">el_h</span><span class="p">,</span> <span class="n">el_h</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_li</span><span class="p">,</span> <span class="n">el_o</span><span class="p">,</span> <span class="n">el_o</span><span class="p">]</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.413969</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.586031</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.192672</span><span class="p">],</span>
                  <span class="p">[</span><span class="mf">0.500000</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.807328</span><span class="p">]]</span>
        <span class="n">struct</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span><span class="n">latt</span><span class="p">,</span> <span class="n">elts</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>

        <span class="n">lioh_entry</span> <span class="o">=</span> <span class="n">ComputedStructureEntry</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
                                            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_hubbard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                          <span class="s1">&#39;hubbards&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                          <span class="s1">&#39;run_type&#39;</span><span class="p">:</span> <span class="s1">&#39;GGA&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;potcar_symbols&#39;</span><span class="p">:</span>
        <span class="p">[</span><span class="s1">&#39;PAW_PBE Fe 17Jan2003&#39;</span><span class="p">,</span> <span class="s1">&#39;PAW_PBE O 08Apr2002&#39;</span><span class="p">,</span> <span class="s1">&#39;PAW_PBE H 15Jun2001&#39;</span><span class="p">]})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">process_entry</span><span class="p">(</span><span class="n">lioh_entry</span><span class="p">))</span></div></div>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1">#import sys;sys.argv = [&#39;&#39;, &#39;Test.testName&#39;]</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">pymatgen 4.6.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2011, Pymatgen Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

  </body>
</html>